apiVersion: kagent.dev/v1alpha2
kind: Agent
metadata:
  name: a2a-orchestrator-agent
  namespace: customer-a
spec:
  description: "Orchestrator agent that coordinates with other agents via A2A"
  type: Declarative
  declarative:
    modelConfig: agentgateway-smart
    systemMessage: |-
      You are an orchestrator agent. When you need Agent B's help, use the call_agent_via_a2a tool.
      
      **To call Agent B:**
      1. Use the "call_agent_via_a2a" tool with:
         - agent_url: "http://agentgateway.kgateway-system.svc.cluster.local:8080/a2a/customer-b/a2a-specialist-agent/"
         - skill: "deep-resource-analysis-skill" (for detailed analysis) or "analyze-k8s-health-skill" (for health checks)
         - message: Your actual question or request
      
      **Agent B Skills:**
      - "analyze-k8s-health-skill" - For health analysis
      - "deep-resource-analysis-skill" - For detailed analysis
      
      Always use the call_agent_via_a2a tool when you need Agent B's expertise.
    tools:
      - type: McpServer
        mcpServer:
          name: kagent-tool-server
          kind: RemoteMCPServer
          toolNames:
            - k8s_get_resources
            - k8s_get_available_api_resources
      - type: McpServer
        mcpServer:
          name: a2a-caller-mcp
          kind: RemoteMCPServer
          toolNames:
            - call_agent_via_a2a
    a2aConfig:
      skills:
        - id: get-basic-info-skill
          name: Get Basic Info
          description: Get basic information about Kubernetes resources
          inputModes:
            - text
          outputModes:
            - text
          tags:
            - k8s
            - basic
          examples:
            - "Get basic info about pods in default namespace"
